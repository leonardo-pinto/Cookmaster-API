function cov_n8pbdxbso(){var path="/home/leonardo/Projects/sd-011-cookmaster/src/controllers/login.js";var hash="19a3fa9f2c0f10ffc2d6769c53f640b8866f4544";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/leonardo/Projects/sd-011-cookmaster/src/controllers/login.js",statementMap:{"0":{start:{line:1,column:12},end:{line:1,column:35}},"1":{start:{line:2,column:22},end:{line:2,column:50}},"2":{start:{line:4,column:15},end:{line:4,column:25}},"3":{start:{line:6,column:25},end:{line:9,column:1}},"4":{start:{line:11,column:14},end:{line:25,column:1}},"5":{start:{line:12,column:30},end:{line:12,column:38}},"6":{start:{line:14,column:15},end:{line:14,column:47}},"7":{start:{line:16,column:2},end:{line:18,column:3}},"8":{start:{line:17,column:4},end:{line:17,column:87}},"9":{start:{line:20,column:28},end:{line:20,column:32}},"10":{start:{line:22,column:16},end:{line:22,column:81}},"11":{start:{line:24,column:2},end:{line:24,column:41}},"12":{start:{line:27,column:0},end:{line:27,column:27}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:11,column:14},end:{line:11,column:15}},loc:{start:{line:11,column:40},end:{line:25,column:1}},line:11}},branchMap:{"0":{loc:{start:{line:16,column:2},end:{line:18,column:3}},type:"if",locations:[{start:{line:16,column:2},end:{line:18,column:3}},{start:{line:16,column:2},end:{line:18,column:3}}],line:16},"1":{loc:{start:{line:16,column:6},end:{line:16,column:65}},type:"binary-expr",locations:[{start:{line:16,column:6},end:{line:16,column:11}},{start:{line:16,column:15},end:{line:16,column:35}},{start:{line:16,column:39},end:{line:16,column:65}}],line:16}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},f:{"0":0},b:{"0":[0,0],"1":[0,0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"19a3fa9f2c0f10ffc2d6769c53f640b8866f4544"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_n8pbdxbso=function(){return actualCoverage;};}return actualCoverage;}cov_n8pbdxbso();const jwt=(cov_n8pbdxbso().s[0]++,require('jsonwebtoken'));const loginServices=(cov_n8pbdxbso().s[1]++,require('../services/login'));const secret=(cov_n8pbdxbso().s[2]++,'mySecret');const jwtConfiguration=(cov_n8pbdxbso().s[3]++,{expiresIn:'2h',algorithm:'HS256'});cov_n8pbdxbso().s[4]++;const login=async(req,res,next)=>{cov_n8pbdxbso().f[0]++;const{email,password}=(cov_n8pbdxbso().s[5]++,req.body);const user=(cov_n8pbdxbso().s[6]++,await loginServices.login(email));cov_n8pbdxbso().s[7]++;if((cov_n8pbdxbso().b[1][0]++,!user)||(cov_n8pbdxbso().b[1][1]++,user.email!==email)||(cov_n8pbdxbso().b[1][2]++,user.password!==password)){cov_n8pbdxbso().b[0][0]++;cov_n8pbdxbso().s[8]++;return next({code:'incorrectLogin',message:'Incorrect username or password'});}else{cov_n8pbdxbso().b[0][1]++;}const{_id:id,role}=(cov_n8pbdxbso().s[9]++,user);const token=(cov_n8pbdxbso().s[10]++,jwt.sign({data:{id,email,role}},secret,jwtConfiguration));cov_n8pbdxbso().s[11]++;return res.status(200).json({token});};cov_n8pbdxbso().s[12]++;module.exports={login};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luLmpzIl0sIm5hbWVzIjpbImp3dCIsInJlcXVpcmUiLCJsb2dpblNlcnZpY2VzIiwic2VjcmV0Iiwiand0Q29uZmlndXJhdGlvbiIsImV4cGlyZXNJbiIsImFsZ29yaXRobSIsImxvZ2luIiwicmVxIiwicmVzIiwibmV4dCIsImVtYWlsIiwicGFzc3dvcmQiLCJib2R5IiwidXNlciIsImNvZGUiLCJtZXNzYWdlIiwiX2lkIiwiaWQiLCJyb2xlIiwidG9rZW4iLCJzaWduIiwiZGF0YSIsInN0YXR1cyIsImpzb24iLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoicy9EQWVZO3lGQWZaLEtBQU1BLENBQUFBLEdBQUcseUJBQUdDLE9BQU8sQ0FBQyxjQUFELENBQVYsQ0FBVCxDQUNBLEtBQU1DLENBQUFBLGFBQWEseUJBQUdELE9BQU8sQ0FBQyxtQkFBRCxDQUFWLENBQW5CLENBRUEsS0FBTUUsQ0FBQUEsTUFBTSx5QkFBRyxVQUFILENBQVosQ0FFQSxLQUFNQyxDQUFBQSxnQkFBZ0IseUJBQUcsQ0FDdkJDLFNBQVMsQ0FBRSxJQURZLENBRXZCQyxTQUFTLENBQUUsT0FGWSxDQUFILENBQXRCLEMsdUJBS0EsS0FBTUMsQ0FBQUEsS0FBSyxDQUFHLE1BQU9DLEdBQVAsQ0FBWUMsR0FBWixDQUFpQkMsSUFBakIsR0FBMEIsd0JBQ3RDLEtBQU0sQ0FBRUMsS0FBRixDQUFTQyxRQUFULDBCQUFzQkosR0FBRyxDQUFDSyxJQUExQixDQUFOLENBRUEsS0FBTUMsQ0FBQUEsSUFBSSx5QkFBRyxLQUFNWixDQUFBQSxhQUFhLENBQUNLLEtBQWQsQ0FBb0JJLEtBQXBCLENBQVQsQ0FBVixDQUhzQyx1QkFLdEMsR0FBSSw0QkFBQ0csSUFBRCw4QkFBU0EsSUFBSSxDQUFDSCxLQUFMLEdBQWVBLEtBQXhCLDhCQUFpQ0csSUFBSSxDQUFDRixRQUFMLEdBQWtCQSxRQUFuRCxDQUFKLENBQWlFLGtEQUMvRCxNQUFPRixDQUFBQSxJQUFJLENBQUMsQ0FBRUssSUFBSSxDQUFFLGdCQUFSLENBQTBCQyxPQUFPLENBQUUsZ0NBQW5DLENBQUQsQ0FBWCxDQUNELENBRkQsZ0NBSUEsS0FBTSxDQUFFQyxHQUFHLENBQUVDLEVBQVAsQ0FBV0MsSUFBWCwwQkFBb0JMLElBQXBCLENBQU4sQ0FFQSxLQUFNTSxDQUFBQSxLQUFLLDBCQUFHcEIsR0FBRyxDQUFDcUIsSUFBSixDQUFTLENBQUVDLElBQUksQ0FBRSxDQUFFSixFQUFGLENBQU1QLEtBQU4sQ0FBYVEsSUFBYixDQUFSLENBQVQsQ0FBd0NoQixNQUF4QyxDQUFnREMsZ0JBQWhELENBQUgsQ0FBWCxDQVhzQyx3QkFhdEMsTUFBT0ssQ0FBQUEsR0FBRyxDQUFDYyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsQ0FBRUosS0FBRixDQUFyQixDQUFQLENBQ0QsQ0FkRCxDLHdCQWdCQUssTUFBTSxDQUFDQyxPQUFQLENBQWlCLENBQUVuQixLQUFGLENBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7XG5jb25zdCBsb2dpblNlcnZpY2VzID0gcmVxdWlyZSgnLi4vc2VydmljZXMvbG9naW4nKTtcblxuY29uc3Qgc2VjcmV0ID0gJ215U2VjcmV0JztcblxuY29uc3Qgand0Q29uZmlndXJhdGlvbiA9IHtcbiAgZXhwaXJlc0luOiAnMmgnLFxuICBhbGdvcml0aG06ICdIUzI1NicsXG59O1xuXG5jb25zdCBsb2dpbiA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG5cbiAgY29uc3QgdXNlciA9IGF3YWl0IGxvZ2luU2VydmljZXMubG9naW4oZW1haWwpO1xuICBcbiAgaWYgKCF1c2VyIHx8IHVzZXIuZW1haWwgIT09IGVtYWlsIHx8IHVzZXIucGFzc3dvcmQgIT09IHBhc3N3b3JkKSB7XG4gICAgcmV0dXJuIG5leHQoeyBjb2RlOiAnaW5jb3JyZWN0TG9naW4nLCBtZXNzYWdlOiAnSW5jb3JyZWN0IHVzZXJuYW1lIG9yIHBhc3N3b3JkJyB9KTtcbiAgfVxuXG4gIGNvbnN0IHsgX2lkOiBpZCwgcm9sZSB9ID0gdXNlcjtcblxuICBjb25zdCB0b2tlbiA9IGp3dC5zaWduKHsgZGF0YTogeyBpZCwgZW1haWwsIHJvbGUgfSB9LCBzZWNyZXQsIGp3dENvbmZpZ3VyYXRpb24pO1xuXG4gIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IHRva2VuIH0pO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7IGxvZ2luIH07XG4iXX0=