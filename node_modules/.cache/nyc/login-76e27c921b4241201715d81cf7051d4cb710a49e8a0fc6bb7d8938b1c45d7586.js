function cov_n8pbdxbso(){var path="/home/leonardo/Projects/sd-011-cookmaster/src/controllers/login.js";var hash="cf87bc22249b41f9589562cba3e1ec719064ddd7";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/leonardo/Projects/sd-011-cookmaster/src/controllers/login.js",statementMap:{"0":{start:{line:1,column:12},end:{line:1,column:35}},"1":{start:{line:2,column:22},end:{line:2,column:50}},"2":{start:{line:4,column:15},end:{line:4,column:25}},"3":{start:{line:6,column:25},end:{line:9,column:1}},"4":{start:{line:11,column:14},end:{line:25,column:1}},"5":{start:{line:12,column:30},end:{line:12,column:38}},"6":{start:{line:14,column:15},end:{line:14,column:47}},"7":{start:{line:16,column:2},end:{line:18,column:3}},"8":{start:{line:17,column:4},end:{line:17,column:44}},"9":{start:{line:20,column:28},end:{line:20,column:32}},"10":{start:{line:22,column:16},end:{line:22,column:81}},"11":{start:{line:24,column:2},end:{line:24,column:41}},"12":{start:{line:27,column:0},end:{line:27,column:27}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:11,column:14},end:{line:11,column:15}},loc:{start:{line:11,column:40},end:{line:25,column:1}},line:11}},branchMap:{"0":{loc:{start:{line:16,column:2},end:{line:18,column:3}},type:"if",locations:[{start:{line:16,column:2},end:{line:18,column:3}},{start:{line:16,column:2},end:{line:18,column:3}}],line:16},"1":{loc:{start:{line:16,column:6},end:{line:16,column:65}},type:"binary-expr",locations:[{start:{line:16,column:6},end:{line:16,column:11}},{start:{line:16,column:15},end:{line:16,column:35}},{start:{line:16,column:39},end:{line:16,column:65}}],line:16}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},f:{"0":0},b:{"0":[0,0],"1":[0,0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"cf87bc22249b41f9589562cba3e1ec719064ddd7"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_n8pbdxbso=function(){return actualCoverage;};}return actualCoverage;}cov_n8pbdxbso();const jwt=(cov_n8pbdxbso().s[0]++,require('jsonwebtoken'));const loginServices=(cov_n8pbdxbso().s[1]++,require('../services/login'));const secret=(cov_n8pbdxbso().s[2]++,'mySecret');const jwtConfiguration=(cov_n8pbdxbso().s[3]++,{expiresIn:'2h',algorithm:'HS256'});cov_n8pbdxbso().s[4]++;const login=async(req,res,next)=>{cov_n8pbdxbso().f[0]++;const{email,password}=(cov_n8pbdxbso().s[5]++,req.body);const user=(cov_n8pbdxbso().s[6]++,await loginServices.login(email));cov_n8pbdxbso().s[7]++;if((cov_n8pbdxbso().b[1][0]++,!user)||(cov_n8pbdxbso().b[1][1]++,user.email!==email)||(cov_n8pbdxbso().b[1][2]++,user.password!==password)){cov_n8pbdxbso().b[0][0]++;cov_n8pbdxbso().s[8]++;return next({code:'incorrectLogin'});}else{cov_n8pbdxbso().b[0][1]++;}const{_id:id,role}=(cov_n8pbdxbso().s[9]++,user);const token=(cov_n8pbdxbso().s[10]++,jwt.sign({data:{id,email,role}},secret,jwtConfiguration));cov_n8pbdxbso().s[11]++;return res.status(200).json({token});};cov_n8pbdxbso().s[12]++;module.exports={login};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luLmpzIl0sIm5hbWVzIjpbImp3dCIsInJlcXVpcmUiLCJsb2dpblNlcnZpY2VzIiwic2VjcmV0Iiwiand0Q29uZmlndXJhdGlvbiIsImV4cGlyZXNJbiIsImFsZ29yaXRobSIsImxvZ2luIiwicmVxIiwicmVzIiwibmV4dCIsImVtYWlsIiwicGFzc3dvcmQiLCJib2R5IiwidXNlciIsImNvZGUiLCJfaWQiLCJpZCIsInJvbGUiLCJ0b2tlbiIsInNpZ24iLCJkYXRhIiwic3RhdHVzIiwianNvbiIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJzL0RBZVk7eUZBZlosS0FBTUEsQ0FBQUEsR0FBRyx5QkFBR0MsT0FBTyxDQUFDLGNBQUQsQ0FBVixDQUFULENBQ0EsS0FBTUMsQ0FBQUEsYUFBYSx5QkFBR0QsT0FBTyxDQUFDLG1CQUFELENBQVYsQ0FBbkIsQ0FFQSxLQUFNRSxDQUFBQSxNQUFNLHlCQUFHLFVBQUgsQ0FBWixDQUVBLEtBQU1DLENBQUFBLGdCQUFnQix5QkFBRyxDQUN2QkMsU0FBUyxDQUFFLElBRFksQ0FFdkJDLFNBQVMsQ0FBRSxPQUZZLENBQUgsQ0FBdEIsQyx1QkFLQSxLQUFNQyxDQUFBQSxLQUFLLENBQUcsTUFBT0MsR0FBUCxDQUFZQyxHQUFaLENBQWlCQyxJQUFqQixHQUEwQix3QkFDdEMsS0FBTSxDQUFFQyxLQUFGLENBQVNDLFFBQVQsMEJBQXNCSixHQUFHLENBQUNLLElBQTFCLENBQU4sQ0FFQSxLQUFNQyxDQUFBQSxJQUFJLHlCQUFHLEtBQU1aLENBQUFBLGFBQWEsQ0FBQ0ssS0FBZCxDQUFvQkksS0FBcEIsQ0FBVCxDQUFWLENBSHNDLHVCQUt0QyxHQUFJLDRCQUFDRyxJQUFELDhCQUFTQSxJQUFJLENBQUNILEtBQUwsR0FBZUEsS0FBeEIsOEJBQWlDRyxJQUFJLENBQUNGLFFBQUwsR0FBa0JBLFFBQW5ELENBQUosQ0FBaUUsa0RBQy9ELE1BQU9GLENBQUFBLElBQUksQ0FBQyxDQUFFSyxJQUFJLENBQUUsZ0JBQVIsQ0FBRCxDQUFYLENBQ0QsQ0FGRCxnQ0FJQSxLQUFNLENBQUVDLEdBQUcsQ0FBRUMsRUFBUCxDQUFXQyxJQUFYLDBCQUFvQkosSUFBcEIsQ0FBTixDQUVBLEtBQU1LLENBQUFBLEtBQUssMEJBQUduQixHQUFHLENBQUNvQixJQUFKLENBQVMsQ0FBRUMsSUFBSSxDQUFFLENBQUVKLEVBQUYsQ0FBTU4sS0FBTixDQUFhTyxJQUFiLENBQVIsQ0FBVCxDQUF3Q2YsTUFBeEMsQ0FBZ0RDLGdCQUFoRCxDQUFILENBQVgsQ0FYc0Msd0JBYXRDLE1BQU9LLENBQUFBLEdBQUcsQ0FBQ2EsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCLENBQUVKLEtBQUYsQ0FBckIsQ0FBUCxDQUNELENBZEQsQyx3QkFnQkFLLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixDQUFFbEIsS0FBRixDQUFqQiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGp3dCA9IHJlcXVpcmUoJ2pzb253ZWJ0b2tlbicpO1xuY29uc3QgbG9naW5TZXJ2aWNlcyA9IHJlcXVpcmUoJy4uL3NlcnZpY2VzL2xvZ2luJyk7XG5cbmNvbnN0IHNlY3JldCA9ICdteVNlY3JldCc7XG5cbmNvbnN0IGp3dENvbmZpZ3VyYXRpb24gPSB7XG4gIGV4cGlyZXNJbjogJzJoJyxcbiAgYWxnb3JpdGhtOiAnSFMyNTYnLFxufTtcblxuY29uc3QgbG9naW4gPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xuXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBsb2dpblNlcnZpY2VzLmxvZ2luKGVtYWlsKTtcbiAgXG4gIGlmICghdXNlciB8fCB1c2VyLmVtYWlsICE9PSBlbWFpbCB8fCB1c2VyLnBhc3N3b3JkICE9PSBwYXNzd29yZCkge1xuICAgIHJldHVybiBuZXh0KHsgY29kZTogJ2luY29ycmVjdExvZ2luJyB9KTtcbiAgfVxuXG4gIGNvbnN0IHsgX2lkOiBpZCwgcm9sZSB9ID0gdXNlcjtcblxuICBjb25zdCB0b2tlbiA9IGp3dC5zaWduKHsgZGF0YTogeyBpZCwgZW1haWwsIHJvbGUgfSB9LCBzZWNyZXQsIGp3dENvbmZpZ3VyYXRpb24pO1xuXG4gIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IHRva2VuIH0pO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7IGxvZ2luIH07XG4iXX0=